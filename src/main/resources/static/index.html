<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>斯巴达幸运 52 后台</title>
    <style type="text/css">
        table
        {
            border-collapse: collapse;
            text-align: center;
            table-layout: fixed;
            width: 700px;
        }
        table td, table th
        {
            border: 1px solid #cad9ea;
            color: #666;
            height: 30px;
        }
        table thead th
        {
            background-color: #CCE8EB;
            width: 100px;
        }
        table tr:nth-child(odd)
        {
            background: #fff;
        }
        table tr:nth-child(even)
        {
            background: #F5FAFA;
        }
    </style>
</head>
<body>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<table class="table table-striped">
    <thead>
    <tr>
        <th>姓名</th>
        <th>得分</th>
    </tr>
    </thead>
    <tbody class="Members">

    </tbody>
</table>
<br>
<table class="table table-striped">
    <thead>
    <tr>
        <th>用户名</th>
        <th style="width: 8em">@eva 我要中奖【当天】</th>
        <th style="width: 8em">@eva 我要中奖【总共】</th>
        <th style="width: 10em">@eva 我的 QP 得分【当天】</th>
        <th style="width: 10em">@eva 我的 QP 得分【总共】</th>
        <th style="width: 9em">@eva 我的碎片数【当天】</th>
        <th style="width: 9em">@eva 我的碎片数【总共】</th>
    </tr>
    </thead>
    <tbody class="Operations">

    </tbody>
</table>
</body>
</html>
<script>
  $(document).ready(function () {
    var memberStr = "";
    $.ajax({
      type: "GET",
      url: "/mozi/v1/lucky-52/get-members",
      async: true,
      success: function (data) {
        window.console.log(data)
        data.forEach(member => {
          console.log(member);
          memberStr += `<tr><td>${member.name}</td><td>${member.qualityPoint}</td></tr>`
        });
        $('.Members').empty().append(memberStr);
      },
      error: function (data) {
        window.console.log(data);
      },
    })
    var operationStr = "";
    function checkIfOver9999(num) {
      return (num > 9999) ? "9999+" : num;
    }
    $.ajax({
      type: "GET",
      url: "/mozi/v1/lucky-52/get-operations",
      async: true,
      success: function (data) {
        window.console.log(data)
        data.forEach(memberOperation => {
          console.log(memberOperation);
          operationStr += `<tr><td>${checkIfOver9999(memberOperation.name)}</td>
                               <td>${checkIfOver9999(memberOperation.dailyOpenTreasureBox)}</td>
                               <td>${checkIfOver9999(memberOperation.totalOpenTreasureBox)}</td>
                               <td>${checkIfOver9999(memberOperation.dailyGetQualityPoint)}</td>
                               <td>${checkIfOver9999(memberOperation.totalGetQualityPoint)}</td>
                               <td>${checkIfOver9999(memberOperation.dailyGetQualityFragment)}</td>
                               <td>${checkIfOver9999(memberOperation.totalGetQualityFragment)}</td></tr>`
        });
        $('.Operations').empty().append(operationStr);
      },
      error: function (data) {
        window.console.log(data);
      },
    })
  })
</script>